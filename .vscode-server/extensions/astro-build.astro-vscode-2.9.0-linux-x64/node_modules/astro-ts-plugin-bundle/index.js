"use strict";var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var rt=q(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.binarySearch=void 0;function $t(t,e){let n=0,i=t.length-1;for(;n<=i;){let r=Math.floor((n+i)/2),c=t[r];if(c<e)n=r+1;else if(c>e)i=r-1;else{n=r,i=r;break}}return Math.max(Math.min(n,i,t.length-1),0)}ge.binarySearch=$t});var Ie=q(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.getStack=X.track=X.resetOffsetStack=X.offsetStack=X.setTracking=void 0;var it=!0,Ne=0;function Xt(t){it=t}X.setTracking=Xt;function Jt(){Ne++}X.offsetStack=Jt;function Qt(){Ne--}X.resetOffsetStack=Qt;function Yt(t,e=[]){return[new Proxy(t,{get(o,m,S){if(it){if(m==="push")return n;if(m==="pop")return i;if(m==="shift")return r;if(m==="unshift")return c;if(m==="splice")return b;if(m==="sort")return s;if(m==="reverse")return a}return Reflect.get(o,m,S)}}),e];function n(...o){return e.push({stack:ne(),length:o.length}),t.push(...o)}function i(){if(e.length){let o=e[e.length-1];o.length>1?o.length--:e.pop()}return t.pop()}function r(){if(e.length){let o=e[0];o.length>1?o.length--:e.shift()}return t.shift()}function c(...o){return e.unshift({stack:ne(),length:o.length}),t.unshift(...o)}function b(o,m,...S){m===void 0&&(m=t.length-o);let d=0,v;for(let u=0;u<e.length;u++){let y=e[u],L=d;if(d=L+y.length,o>=L){v=u+1;let T=y.length;y.length=o-L,e.splice(v,0,{stack:y.stack,length:T-y.length});break}}if(v===void 0)throw new Error("Invalid splice operation");let D=m;for(let u=v;u<e.length;u++){let y=e[u];for(;D>0&&y.length>0;)y.length--,D--;if(D===0)break}return e.splice(v,0,{stack:ne(),length:S.length}),t.splice(o,m,...S)}function s(o){return e.splice(0,e.length,{stack:ne(),length:t.length}),t.sort(o)}function a(){return e.splice(0,e.length,{stack:ne(),length:t.length}),t.reverse()}}X.track=Yt;function ne(){let e=new Error().stack.split(`
`)[3+Ne].trim();return e.endsWith(")")?e=e.slice(e.lastIndexOf("(")+1,-1):e=e.slice(e.lastIndexOf(" ")+1),e}X.getStack=ne});var ot=q(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0})});var pt=q(z=>{"use strict";var Zt=z&&z.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ct=z&&z.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Zt(e,t,n)};Object.defineProperty(z,"__esModule",{value:!0});z.replaceRange=z.replaceSourceRange=z.replaceAll=z.replace=z.create=z.toString=z.getLength=void 0;var at=rt(),Q=Ie();ct(ot(),z);ct(Ie(),z);function ft(t){let e=0;for(let n of t)e+=typeof n=="string"?n.length:n[0].length;return e}z.getLength=ft;function Re(t){return t.map(e=>typeof e=="string"?e:e[0]).join("")}z.toString=Re;function en(t){return[[t,void 0,0]]}z.create=en;function tn(t,e,...n){let r=Re(t).match(e);if(r&&r.index!==void 0){let c=r.index,b=c+r[0].length;(0,Q.offsetStack)(),je(t,c,b,...n.map(s=>typeof s=="function"?s(r[0]):s)),(0,Q.resetOffsetStack)()}}z.replace=tn;function nn(t,e,...n){let i=Re(t),r=i.matchAll(e),c=i.length,b=0;for(let s of r)if(s.index!==void 0){let a=s.index+b,o=a+s[0].length;(0,Q.offsetStack)(),je(t,a,o,...n.map(S=>typeof S=="function"?S(s[0]):S)),(0,Q.resetOffsetStack)();let m=ft(t);b+=m-c,c=m}}z.replaceAll=nn;function rn(t,e,n,i,...r){for(let c of t)if(typeof c!="string"&&c[1]===e){let b=c[2],s=c[2]+c[0].length;if(b<=n&&s>=i){let a=[];n>b&&a.push(ut(c,n-b));for(let o of r)a.push(o);return i<s&&a.push(dt(c,i-s)),lt(a),(0,Q.offsetStack)(),t.splice(t.indexOf(c),1,...a),(0,Q.resetOffsetStack)(),!0}}return!1}z.replaceSourceRange=rn;function je(t,e,n,...i){let r=sn(t),c=(0,at.binarySearch)(r,e),b=(0,at.binarySearch)(r,n),s=t[c],a=t[b],o=r[c],m=r[b],S=r[b]+(typeof a=="string"?a.length:a[0].length),d=[];e>o&&d.push(ut(s,e-o));for(let v of i)d.push(v);n<S&&d.push(dt(a,n-m)),lt(d),(0,Q.offsetStack)(),t.splice(c,b-c+1,...d),(0,Q.resetOffsetStack)()}z.replaceRange=je;function lt(t){for(let e=t.length-1;e>=1;e--)typeof t[e]=="string"&&typeof t[e-1]=="string"&&(t[e-1]=t[e-1]+t[e],(0,Q.offsetStack)(),t.splice(e,1),(0,Q.resetOffsetStack)())}function ut(t,e){return typeof t=="string"?t.slice(0,e):[t[0].slice(0,e),...t.slice(1)]}function dt(t,e){return typeof t=="string"?t.slice(e):(e<0&&(e+=t[0].length),[t[0].slice(e),t[1],t[2]+e,...t.slice(3)])}function sn(t){let e=[],n=0;for(let i of t)e.push(n),n+=typeof i=="string"?i.length:i[0].length;return e}});var gt=q(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.binarySearch=void 0;function on(t,e){let n=0,i=t.length-1,r;for(;n<=i;){let s=Math.floor((n+i)/2),a=t[s];if(a<e)n=s+1;else if(a>e)i=s-1;else{n=s,i=s,r=s;break}}let c=Math.max(Math.min(n,i,t.length-1),0),b=Math.min(Math.max(n,i,0),t.length-1);return{low:c,high:b,match:r}}he.binarySearch=on});var ke=q(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.translateOffset=void 0;function an(t,e,n,i){for(let r=0;r<e.length;r++){let c=e[r],b=n[r],s=i[r];if(t>=c&&t<=c+s)return b+t-c}}me.translateOffset=an});var ht=q(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.SourceMap=void 0;var He=gt(),cn=ke(),qe=class{constructor(e){this.mappings=e}getSourceOffset(e){for(let n of this.findMatching(e,"generatedOffsets","sourceOffsets"))return n}getGeneratedOffset(e){for(let n of this.findMatching(e,"sourceOffsets","generatedOffsets"))return n}getSourceOffsets(e){return this.findMatching(e,"generatedOffsets","sourceOffsets")}getGeneratedOffsets(e){return this.findMatching(e,"sourceOffsets","generatedOffsets")}*findMatching(e,n,i){let r=this.getMemoBasedOnRange(n);if(r.offsets.length===0)return;let{low:c,high:b}=(0,He.binarySearch)(r.offsets,e),s=new Set;for(let a=c;a<=b;a++)for(let o of r.mappings[a]){if(s.has(o))continue;s.add(o);let m=(0,cn.translateOffset)(e,o[n],o[i],o.lengths);m!==void 0&&(yield[m,o])}}getMemoBasedOnRange(e){return e==="sourceOffsets"?this.sourceCodeOffsetsMemo??=this.createMemo("sourceOffsets"):this.generatedCodeOffsetsMemo??=this.createMemo("generatedOffsets")}createMemo(e){let n=new Set;for(let c of this.mappings)for(let b=0;b<c[e].length;b++)n.add(c[e][b]),n.add(c[e][b]+c.lengths[b]);let i=[...n].sort((c,b)=>c-b),r=i.map(()=>new Set);for(let c of this.mappings)for(let b=0;b<c[e].length;b++){let s=(0,He.binarySearch)(i,c[e][b]).match,a=(0,He.binarySearch)(i,c[e][b]+c.lengths[b]).match;for(let o=s;o<=a;o++)r[o].add(c)}return{offsets:i,mappings:r}}};Se.SourceMap=qe});var mt=q(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.buildMappings=void 0;function fn(t){let e=0,n=[];for(let i of t)typeof i=="string"?e+=i.length:(n.push({source:i[1],sourceOffsets:[i[2]],generatedOffsets:[e],lengths:[i[0].length],data:i[3]}),e+=i[0].length);return n}be.buildMappings=fn});var St=q(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.buildStacks=void 0;function ln(t,e){let n=0,i=0,r=[];for(let c of e){let b=n;for(let s=0;s<c.length;s++){let a=t[i+s];typeof a=="string"?n+=a.length:n+=a[0].length}i+=c.length,r.push({source:c.stack,range:[b,n]})}return r}ve.buildStacks=ln});var ye=q(J=>{"use strict";var un=J&&J.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ue=J&&J.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&un(e,t,n)};Object.defineProperty(J,"__esModule",{value:!0});ue(pt(),J);ue(ht(),J);ue(ke(),J);ue(mt(),J);ue(St(),J)});var bt=q(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.resolveRenameEditText=w.resolveRenameNewName=w.shouldReportDiagnostics=w.isSignatureHelpEnabled=w.isAutoInsertEnabled=w.isCompletionEnabled=w.isFormattingEnabled=w.isCodeActionsEnabled=w.isDiagnosticsEnabled=w.isDocumentLinkEnabled=w.isColorEnabled=w.isLinkedEditingEnabled=w.isSelectionRangesEnabled=w.isFoldingRangesEnabled=w.isSymbolsEnabled=w.isHighlightEnabled=w.isImplementationEnabled=w.isReferencesEnabled=w.isTypeDefinitionEnabled=w.isDefinitionEnabled=w.isRenameEnabled=w.isCallHierarchyEnabled=w.isSemanticTokensEnabled=w.isCodeLensEnabled=w.isInlayHintsEnabled=w.isHoverEnabled=void 0;function dn(t){return!!t.semantic}w.isHoverEnabled=dn;function pn(t){return!!t.semantic}w.isInlayHintsEnabled=pn;function gn(t){return!!t.semantic}w.isCodeLensEnabled=gn;function hn(t){return typeof t.semantic=="object"?t.semantic.shouldHighlight?.()??!0:!!t.semantic}w.isSemanticTokensEnabled=hn;function mn(t){return!!t.navigation}w.isCallHierarchyEnabled=mn;function Sn(t){return!!t.navigation}w.isRenameEnabled=Sn;function bn(t){return!!t.navigation}w.isDefinitionEnabled=bn;function vn(t){return!!t.navigation}w.isTypeDefinitionEnabled=vn;function yn(t){return!!t.navigation}w.isReferencesEnabled=yn;function En(t){return!!t.navigation}w.isImplementationEnabled=En;function xn(t){return!!t.navigation}w.isHighlightEnabled=xn;function _n(t){return!!t.structure}w.isSymbolsEnabled=_n;function Cn(t){return!!t.structure}w.isFoldingRangesEnabled=Cn;function On(t){return!!t.structure}w.isSelectionRangesEnabled=On;function Mn(t){return!!t.structure}w.isLinkedEditingEnabled=Mn;function Fn(t){return!!t.structure}w.isColorEnabled=Fn;function Dn(t){return!!t.structure}w.isDocumentLinkEnabled=Dn;function wn(t){return!!t.verification}w.isDiagnosticsEnabled=wn;function Pn(t){return!!t.verification}w.isCodeActionsEnabled=Pn;function Tn(t){return!!t.format}w.isFormattingEnabled=Tn;function Ln(t){return!!t.completion}w.isCompletionEnabled=Ln;function An(t){return!!t.completion}w.isAutoInsertEnabled=An;function Nn(t){return!!t.completion}w.isSignatureHelpEnabled=Nn;function In(t){return typeof t.verification=="object"?t.verification.shouldReport?.()??!0:!!t.verification}w.shouldReportDiagnostics=In;function Rn(t,e){return typeof e.navigation=="object"?e.navigation.resolveRenameNewName?.(t)??t:t}w.resolveRenameNewName=Rn;function jn(t,e){return typeof e.navigation=="object"?e.navigation.resolveRenameEditText?.(t)??t:t}w.resolveRenameEditText=jn});var We=q(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.LinkedCodeMap=void 0;var kn=ye(),Ge=class extends kn.SourceMap{*getLinkedOffsets(e){for(let n of this.getGeneratedOffsets(e))yield n[0];for(let n of this.getSourceOffsets(e))yield n[0]}};Ee.LinkedCodeMap=Ge});var yt=q(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0})});var ze=q(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.FileMap=void 0;var Ve=class extends Map{constructor(e){super(),this.caseSensitive=e,this.originalFileNames=new Map}keys(){return this.originalFileNames.values()}get(e){return super.get(this.normalizeId(e))}has(e){return super.has(this.normalizeId(e))}set(e,n){return this.originalFileNames.set(this.normalizeId(e),e),super.set(this.normalizeId(e),n)}delete(e){return this.originalFileNames.delete(this.normalizeId(e)),super.delete(this.normalizeId(e))}clear(){return this.originalFileNames.clear(),super.clear()}normalizeId(e){return this.caseSensitive?e:e.toLowerCase()}};xe.FileMap=Ve});var pe=q(B=>{"use strict";var Hn=B&&B.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),de=B&&B.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Hn(e,t,n)};Object.defineProperty(B,"__esModule",{value:!0});B.forEachEmbeddedCode=B.updateVirtualCodeMapOfMap=B.createLanguage=void 0;de(ye(),B);de(bt(),B);de(We(),B);de(yt(),B);de(ze(),B);var Et=ye(),qn=We(),Gn=ze();function Wn(t,e,n){let i=new Gn.FileMap(e),r=new WeakMap,c=new WeakMap,b=new WeakMap;return{plugins:t,scripts:{get(s){return n(s),i.get(s)},set(s,a,o,m=t){if(!o){for(let S of t)if(o=S.getLanguageId?.(s),o)break}if(!o){console.warn(`languageId not found for ${s}`);return}if(i.has(s)){let S=i.get(s);if(S.languageId!==o)return this.delete(s),this.set(s,a,o);if(S.snapshot!==a){if(S.snapshot=a,S.generated){let d=S.generated.languagePlugin.updateVirtualCode?.(s,S.generated.root,a);if(d){S.generated.root=d,S.generated.embeddedCodes.clear();for(let v of _e(S.generated.root))r.set(v,S),S.generated.embeddedCodes.set(v.id,v);return S}else{this.delete(s);return}}}else return S}else{let S={id:s,languageId:o,snapshot:a};i.set(s,S);for(let d of m){let v=d.createVirtualCode?.(s,o,a);if(v){S.generated={root:v,languagePlugin:d,embeddedCodes:new Map};for(let D of _e(v))r.set(D,S),S.generated.embeddedCodes.set(D.id,D);break}}return S}},delete(s){let a=i.get(s);a&&(a.generated&&a.generated.languagePlugin.disposeVirtualCode?.(s,a.generated.root),i.delete(s))}},maps:{get(s,a){if(!a){let o=r.get(s);if(!o)return;a=o.id}for(let[o,[m,S]]of this.forEach(s))if(o===a)return S},forEach(s){let a=c.get(s.snapshot);return a||(a=new Map,c.set(s.snapshot,a)),xt(s,a,o=>{if(o){let m=i.get(o);return[o,m.snapshot]}else{let m=r.get(s);return[m.id,m.snapshot]}}),a}},linkedCodeMaps:{get(s){return b.has(s.snapshot)||b.set(s.snapshot,s.linkedCodeMappings?new qn.LinkedCodeMap(s.linkedCodeMappings):void 0),b.get(s.snapshot)}}}}B.createLanguage=Wn;function xt(t,e,n){let i=new Set;if(!t.mappings.length){let r=n(void 0);r&&e.set(r[0],[r[1],new Et.SourceMap([])])}for(let r of t.mappings){if(i.has(r.source))continue;i.add(r.source);let c=n(r.source);c&&(!e.has(c[0])||e.get(c[0])[0]!==c[1])&&e.set(c[0],[c[1],new Et.SourceMap(t.mappings.filter(b=>b.source===r.source))])}}B.updateVirtualCodeMapOfMap=xt;function*_e(t){if(yield t,t.embeddedCodes)for(let e of t.embeddedCodes)yield*_e(e)}B.forEachEmbeddedCode=_e});var _t=q(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.dedupeDocumentSpans=void 0;function Vn(t){return zn(t,e=>[e.fileName,e.textSpan.start,e.textSpan.length].join(":"))}Ce.dedupeDocumentSpans=Vn;function zn(t,e){let n=new Map;for(let i of t.reverse())n.set(e(i),i);return[...n.values()]}});var Be=q(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.getServiceScript=re.notEmpty=void 0;function Bn(t){return t!=null}re.notEmpty=Bn;function Kn(t,e){let n=t.scripts.get(e);if(n?.generated){let i=n.generated.languagePlugin.typescript?.getServiceScript(n.generated.root);if(i){let r=t.maps.get(i.code,n.id);if(r)return[i,n,r]}}return[void 0,void 0,void 0]}re.getServiceScript=Kn});var Ft=q(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.toGeneratedOffsets=W.toGeneratedOffset=W.toSourceOffset=W.transformTextSpan=W.transformTextChange=W.transformSpan=W.transformDocumentSpan=W.transformFileTextChanges=W.fillSourceFileText=W.transformDiagnostic=W.transformCallHierarchyItem=void 0;var Un=pe(),se=Be(),ie=new WeakMap,Ct=new WeakSet;function $n(t,e,n){let i=ee(t,e.file,e.span,n),r=ee(t,e.file,e.selectionSpan,n);return{...e,span:i?.textSpan??{start:0,length:0},selectionSpan:r?.textSpan??{start:0,length:0}}}W.transformCallHierarchyItem=$n;function Ot(t,e,n){if(!ie.has(e)){ie.set(e,void 0);let{relatedInformation:i}=e;if(i&&(e.relatedInformation=i.map(r=>Ot(t,r,n)).filter(se.notEmpty)),e.file!==void 0&&e.start!==void 0&&e.length!==void 0){let[r,c,b]=(0,se.getServiceScript)(t,e.file.fileName);if(r){let s=Oe(c,b,{start:e.start,length:e.length},Un.shouldReportDiagnostics);s&&(n&&Mt(t,e.file),ie.set(e,{...e,start:s.start,length:s.length}))}else ie.set(e,e)}else ie.set(e,e)}return ie.get(e)}W.transformDiagnostic=Ot;function Mt(t,e){if(Ct.has(e))return;Ct.add(e);let[n,i]=(0,se.getServiceScript)(t,e.fileName);n&&(e.text=i.snapshot.getText(0,i.snapshot.getLength())+e.text.substring(i.snapshot.getLength()))}W.fillSourceFileText=Mt;function Xn(t,e,n){let[i,r]=(0,se.getServiceScript)(t,e.fileName);return r?{...e,textChanges:e.textChanges.map(c=>{let b=ee(t,e.fileName,c.span,n);if(b)return{...c,span:b.textSpan}}).filter(se.notEmpty)}:e}W.transformFileTextChanges=Xn;function Jn(t,e,n,i){let r=ee(t,e.fileName,e.textSpan,n);if(!r&&i&&(r={fileName:e.fileName,textSpan:{start:0,length:0}}),!r)return;let c=ee(t,e.fileName,e.contextSpan,n),b=ee(t,e.originalFileName,e.originalTextSpan,n),s=ee(t,e.originalFileName,e.originalContextSpan,n);return{...e,fileName:r.fileName,textSpan:r.textSpan,contextSpan:c?.textSpan,originalFileName:b?.fileName,originalTextSpan:b?.textSpan,originalContextSpan:s?.textSpan}}W.transformDocumentSpan=Jn;function ee(t,e,n,i){if(!e||!n)return;let[r,c,b]=(0,se.getServiceScript)(t,e);if(r){let s=Oe(c,b,n,i);if(s)return{fileName:e,textSpan:s}}else return{fileName:e,textSpan:n}}W.transformSpan=ee;function Qn(t,e,n,i){let r=Oe(t,e,n.span,i);if(r)return{newText:n.newText,span:r}}W.transformTextChange=Qn;function Oe(t,e,n,i){let r=n.start,c=n.start+n.length,b=Ke(t,e,r,i),s=Ke(t,e,c,i);if(b!==void 0&&s!==void 0&&s>=b)return{start:b,length:s-b}}W.transformTextSpan=Oe;function Ke(t,e,n,i){for(let[r,c]of e.getSourceOffsets(n-t.snapshot.getLength()))if(i(c.data))return r}W.toSourceOffset=Ke;function Yn(t,e,n,i){for(let[r,c]of e.getGeneratedOffsets(n))if(i(c.data))return r+t.snapshot.getLength()}W.toGeneratedOffset=Yn;function*Zn(t,e,n){for(let[i,r]of e.getGeneratedOffsets(n))yield[i+t.snapshot.getLength(),r]}W.toGeneratedOffsets=Zn});var Dt=q(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.decorateLanguageService=void 0;var M=pe(),te=_t(),A=Be(),P=Ft(),k=/\\/g;function er(t,e){let{getNavigationTree:n,getOutliningSpans:i}=e;e.getNavigationTree=_=>{let p=_.replace(k,"/"),[f]=(0,A.getServiceScript)(t,p);if(f){let E=n(p);return E.childItems=void 0,E}else return n(p)},e.getOutliningSpans=_=>{let p=_.replace(k,"/"),[f]=(0,A.getServiceScript)(t,p);return f?[]:i(p)};let{findReferences:r,findRenameLocations:c,getCompletionEntryDetails:b,getCompletionsAtPosition:s,getDefinitionAndBoundSpan:a,getDefinitionAtPosition:o,getFileReferences:m,getFormattingEditsForDocument:S,getFormattingEditsForRange:d,getFormattingEditsAfterKeystroke:v,getImplementationAtPosition:D,getLinkedEditingRangeAtPosition:u,getQuickInfoAtPosition:y,getSignatureHelpItems:L,getReferencesAtPosition:R,getSemanticDiagnostics:T,getSyntacticDiagnostics:j,getSuggestionDiagnostics:F,getTypeDefinitionAtPosition:V,getEncodedSemanticClassifications:H,getDocumentHighlights:U,getApplicableRefactors:$,getEditsForFileRename:Y,getEditsForRefactor:Ue,getRenameInfo:$e,getCodeFixesAtPosition:Xe,prepareCallHierarchy:Je,provideCallHierarchyIncomingCalls:Qe,provideCallHierarchyOutgoingCalls:Ye,provideInlayHints:Ze,organizeImports:Kt}=e;e.getFormattingEditsForDocument=(_,p)=>{let f=_.replace(k,"/"),[E,O,g]=(0,A.getServiceScript)(t,f);return E?g.mappings.some(l=>(0,M.isFormattingEnabled)(l.data))?S(f,p).map(l=>(0,P.transformTextChange)(O,g,l,M.isFormattingEnabled)).filter(A.notEmpty):[]:S(f,p)},e.getFormattingEditsForRange=(_,p,f,E)=>{let O=_.replace(k,"/"),[g,h,l]=(0,A.getServiceScript)(t,O);if(g){let C=(0,P.toGeneratedOffset)(h,l,p,M.isFormattingEnabled),I=(0,P.toGeneratedOffset)(h,l,f,M.isFormattingEnabled);return C!==void 0&&I!==void 0?d(O,C,I,E).map(x=>(0,P.transformTextChange)(h,l,x,M.isFormattingEnabled)).filter(A.notEmpty):[]}else return d(O,p,f,E)},e.getFormattingEditsAfterKeystroke=(_,p,f,E)=>{let O=_.replace(k,"/"),[g,h,l]=(0,A.getServiceScript)(t,O);if(g){let C=(0,P.toGeneratedOffset)(h,l,p,M.isFormattingEnabled);return C!==void 0?v(O,C,f,E).map(N=>(0,P.transformTextChange)(h,l,N,M.isFormattingEnabled)).filter(A.notEmpty):[]}else return v(O,p,f,E)},e.getEditsForFileRename=(_,p,f,E)=>Y(_,p,f,E).map(g=>(0,P.transformFileTextChanges)(t,g,M.isRenameEnabled)).filter(A.notEmpty),e.getLinkedEditingRangeAtPosition=(_,p)=>{let f=_.replace(k,"/"),[E,O,g]=(0,A.getServiceScript)(t,f);if(E){let h=(0,P.toGeneratedOffset)(O,g,p,M.isLinkedEditingEnabled);if(h!==void 0){let l=u(f,h);if(l)return{ranges:l.ranges.map(C=>(0,P.transformTextSpan)(O,g,C,M.isLinkedEditingEnabled)).filter(A.notEmpty),wordPattern:l.wordPattern}}}else return u(f,p)},e.prepareCallHierarchy=(_,p)=>{let f=_.replace(k,"/"),[E,O,g]=(0,A.getServiceScript)(t,f);if(E){let h=(0,P.toGeneratedOffset)(O,g,p,M.isCallHierarchyEnabled);if(h!==void 0){let l=Je(f,h);if(Array.isArray(l))return l.map(C=>(0,P.transformCallHierarchyItem)(t,C,M.isCallHierarchyEnabled));if(l)return(0,P.transformCallHierarchyItem)(t,l,M.isCallHierarchyEnabled)}}else return Je(f,p)},e.provideCallHierarchyIncomingCalls=(_,p)=>{let f=[],E=_.replace(k,"/"),[O,g,h]=(0,A.getServiceScript)(t,E);if(O){let l=(0,P.toGeneratedOffset)(g,h,p,M.isCallHierarchyEnabled);l!==void 0&&(f=Qe(E,l))}else f=Qe(E,p);return f.map(l=>{let C=(0,P.transformCallHierarchyItem)(t,l.from,M.isCallHierarchyEnabled),I=l.fromSpans.map(N=>(0,P.transformSpan)(t,l.from.file,N,M.isCallHierarchyEnabled)?.textSpan).filter(A.notEmpty);return{from:C,fromSpans:I}})},e.provideCallHierarchyOutgoingCalls=(_,p)=>{let f=[],E=_.replace(k,"/"),[O,g,h]=(0,A.getServiceScript)(t,E);if(O){let l=(0,P.toGeneratedOffset)(g,h,p,M.isCallHierarchyEnabled);l!==void 0&&(f=Ye(E,l))}else f=Ye(E,p);return f.map(l=>{let C=(0,P.transformCallHierarchyItem)(t,l.to,M.isCallHierarchyEnabled),I=l.fromSpans.map(N=>g?(0,P.transformTextSpan)(g,h,N,M.isCallHierarchyEnabled):N).filter(A.notEmpty);return{to:C,fromSpans:I}})},e.organizeImports=(_,p,f)=>Kt(_,p,f).map(g=>(0,P.transformFileTextChanges)(t,g,M.isCodeActionsEnabled)).filter(A.notEmpty),e.getQuickInfoAtPosition=(_,p)=>{let f=_.replace(k,"/"),[E,O,g]=(0,A.getServiceScript)(t,f);if(E){let h=(0,P.toGeneratedOffset)(O,g,p,M.isHoverEnabled);if(h!==void 0){let l=y(f,h);if(l){let C=(0,P.transformTextSpan)(O,g,l.textSpan,M.isHoverEnabled);if(C)return{...l,textSpan:C}}}}else return y(f,p)},e.getSignatureHelpItems=(_,p,f)=>{let E=_.replace(k,"/"),[O,g,h]=(0,A.getServiceScript)(t,E);if(O){let l=(0,P.toGeneratedOffset)(g,h,p,M.isSignatureHelpEnabled);if(l!==void 0){let C=L(E,l,f);if(C){let I=(0,P.transformTextSpan)(g,h,C.applicableSpan,M.isSignatureHelpEnabled);if(I)return{...C,applicableSpan:I}}}}else return L(E,p,f)},e.getDocumentHighlights=(_,p,f)=>{let E=_.replace(k,"/");return Z(E,p,M.isHighlightEnabled,h=>U(E,h,f),function*(h){for(let l of h)for(let C of l.highlightSpans)yield[C.fileName??l.fileName,C.textSpan.start]}).flat().map(h=>({...h,highlightSpans:h.highlightSpans.map(l=>{let C=(0,P.transformSpan)(t,l.fileName??h.fileName,l.textSpan,M.isHighlightEnabled)?.textSpan;if(C)return{...l,contextSpan:(0,P.transformSpan)(t,l.fileName??h.fileName,l.contextSpan,M.isHighlightEnabled)?.textSpan,textSpan:C}}).filter(A.notEmpty)}))},e.getApplicableRefactors=(_,p,f,E,O,g)=>{let h=_.replace(k,"/"),[l,C,I]=(0,A.getServiceScript)(t,h);if(l){let N=(0,P.toGeneratedOffset)(C,I,typeof p=="number"?p:p.pos,M.isCodeActionsEnabled);if(N!==void 0){let x=typeof p=="number"?N:{pos:N,end:N+p.end-p.pos};return $(h,x,f,E,O,g)}return[]}else return $(h,p,f,E,O,g)},e.getEditsForRefactor=(_,p,f,E,O,g)=>{let h,l=_.replace(k,"/"),[C,I,N]=(0,A.getServiceScript)(t,l);if(C){let x=(0,P.toGeneratedOffset)(I,N,typeof f=="number"?f:f.pos,M.isCodeActionsEnabled);if(x!==void 0){let G=typeof f=="number"?x:{pos:x,end:x+f.end-f.pos};h=Ue(l,p,G,E,O,g)}}else h=Ue(l,p,f,E,O,g);if(h)return h.edits=h.edits.map(x=>(0,P.transformFileTextChanges)(t,x,M.isCodeActionsEnabled)).filter(A.notEmpty),h},e.getRenameInfo=(_,p,f)=>{let E=_.replace(k,"/"),[O,g,h]=(0,A.getServiceScript)(t,E);if(O){let l;for(let[C,I]of(0,P.toGeneratedOffsets)(g,h,p)){if(!(0,M.isRenameEnabled)(I.data))continue;let N=$e(E,C,f);if(N.canRename){let x=(0,P.transformTextSpan)(g,h,N.triggerSpan,M.isRenameEnabled);if(x)return N.triggerSpan=x,N}else l=N}return l||{canRename:!1,localizedErrorMessage:"Failed to get rename locations"}}else return $e(E,p,f)},e.getCodeFixesAtPosition=(_,p,f,E,O,g)=>{let h=[],l=_.replace(k,"/"),[C,I,N]=(0,A.getServiceScript)(t,l);if(C){let x=(0,P.toGeneratedOffset)(I,N,p,M.isCodeActionsEnabled),G=(0,P.toGeneratedOffset)(I,N,f,M.isCodeActionsEnabled);x!==void 0&&G!==void 0&&(h=Xe(l,x,G,E,O,g))}else h=Xe(l,p,f,E,O,g);return h=h.map(x=>(x.changes=x.changes.map(G=>(0,P.transformFileTextChanges)(t,G,M.isCodeActionsEnabled)).filter(A.notEmpty),x)),h},e.getEncodedSemanticClassifications=(_,p,f)=>{let E=_.replace(k,"/"),[O,g,h]=(0,A.getServiceScript)(t,E);if(O){let l,C;for(let x of h.mappings)(0,M.isSemanticTokensEnabled)(x.data)&&x.sourceOffsets[0]>=p.start&&x.sourceOffsets[0]<=p.start+p.length&&(l??=x.generatedOffsets[0],C??=x.generatedOffsets[x.generatedOffsets.length-1]+x.lengths[x.lengths.length-1],l=Math.min(l,x.generatedOffsets[0]),C=Math.max(C,x.generatedOffsets[x.generatedOffsets.length-1]+x.lengths[x.lengths.length-1]));l??=0,C??=g.snapshot.getLength(),l+=g.snapshot.getLength(),C+=g.snapshot.getLength();let I=H(E,{start:l,length:C-l},f),N=[];for(let x=0;x<I.spans.length;x+=3){let G=(0,P.toSourceOffset)(g,h,I.spans[x],M.isSemanticTokensEnabled),K=(0,P.toSourceOffset)(g,h,I.spans[x]+I.spans[x+1],M.isSemanticTokensEnabled);G!==void 0&&K!==void 0&&N.push(G,K-G,I.spans[x+2])}return I.spans=N,I}else return H(E,p,f)},e.getSyntacticDiagnostics=_=>{let p=_.replace(k,"/");return j(p).map(f=>(0,P.transformDiagnostic)(t,f,!1)).filter(A.notEmpty)},e.getSemanticDiagnostics=_=>{let p=_.replace(k,"/");return T(p).map(f=>(0,P.transformDiagnostic)(t,f,!1)).filter(A.notEmpty)},e.getSuggestionDiagnostics=_=>{let p=_.replace(k,"/");return F(p).map(f=>(0,P.transformDiagnostic)(t,f,!1)).filter(A.notEmpty)},e.getDefinitionAndBoundSpan=(_,p)=>{let f=_.replace(k,"/"),E=Z(f,p,M.isDefinitionEnabled,h=>a(f,h),function*(h){for(let l of h.definitions??[])yield[l.fileName,l.textSpan.start]}),O=E.map(h=>(0,P.transformSpan)(t,f,h.textSpan,M.isDefinitionEnabled)?.textSpan).filter(A.notEmpty)[0];if(!O)return;let g=E.map(h=>h.definitions?.map(l=>(0,P.transformDocumentSpan)(t,l,M.isDefinitionEnabled,l.fileName!==f)).filter(A.notEmpty)).filter(A.notEmpty).flat();return{textSpan:O,definitions:(0,te.dedupeDocumentSpans)(g)}},e.findReferences=(_,p)=>{let f=_.replace(k,"/");return Z(f,p,M.isReferencesEnabled,g=>r(f,g),function*(g){for(let h of g)for(let l of h.references)yield[l.fileName,l.textSpan.start]}).flat().map(g=>({definition:(0,P.transformDocumentSpan)(t,g.definition,M.isDefinitionEnabled,!0),references:g.references.map(l=>(0,P.transformDocumentSpan)(t,l,M.isReferencesEnabled)).filter(A.notEmpty)}))},e.getDefinitionAtPosition=(_,p)=>{let f=_.replace(k,"/"),O=Z(f,p,M.isDefinitionEnabled,g=>o(f,g),function*(g){for(let h of g)yield[h.fileName,h.textSpan.start]}).flat().map(g=>(0,P.transformDocumentSpan)(t,g,M.isDefinitionEnabled,g.fileName!==f)).filter(A.notEmpty);return(0,te.dedupeDocumentSpans)(O)},e.getTypeDefinitionAtPosition=(_,p)=>{let f=_.replace(k,"/"),O=Z(f,p,M.isTypeDefinitionEnabled,g=>V(f,g),function*(g){for(let h of g)yield[h.fileName,h.textSpan.start]}).flat().map(g=>(0,P.transformDocumentSpan)(t,g,M.isTypeDefinitionEnabled)).filter(A.notEmpty);return(0,te.dedupeDocumentSpans)(O)},e.getImplementationAtPosition=(_,p)=>{let f=_.replace(k,"/"),O=Z(f,p,M.isImplementationEnabled,g=>D(f,g),function*(g){for(let h of g)yield[h.fileName,h.textSpan.start]}).flat().map(g=>(0,P.transformDocumentSpan)(t,g,M.isImplementationEnabled)).filter(A.notEmpty);return(0,te.dedupeDocumentSpans)(O)},e.findRenameLocations=(_,p,f,E,O)=>{let g=_.replace(k,"/"),l=Z(g,p,M.isRenameEnabled,C=>c(g,C,f,E,O),function*(C){for(let I of C)yield[I.fileName,I.textSpan.start]}).flat().map(C=>(0,P.transformDocumentSpan)(t,C,M.isRenameEnabled)).filter(A.notEmpty);return(0,te.dedupeDocumentSpans)(l)},e.getReferencesAtPosition=(_,p)=>{let f=_.replace(k,"/"),O=Z(f,p,M.isReferencesEnabled,g=>R(f,g),function*(g){for(let h of g)yield[h.fileName,h.textSpan.start]}).flat().map(g=>(0,P.transformDocumentSpan)(t,g,M.isReferencesEnabled)).filter(A.notEmpty);return(0,te.dedupeDocumentSpans)(O)},e.getCompletionsAtPosition=(_,p,f,E)=>{let O=_.replace(k,"/"),[g,h,l]=(0,A.getServiceScript)(t,O);if(g){let C=[];for(let[I,N]of(0,P.toGeneratedOffsets)(h,l,p)){if(!(0,M.isCompletionEnabled)(N.data))continue;let x=s(O,I,f,E);if(!x||!x.entries.length)continue;typeof N.data.completion=="object"&&N.data.completion.onlyImport&&(x.entries=x.entries.filter(K=>!!K.sourceDisplay));for(let K of x.entries)K.replacementSpan=K.replacementSpan&&(0,P.transformTextSpan)(h,l,K.replacementSpan,M.isCompletionEnabled);x.optionalReplacementSpan=x.optionalReplacementSpan&&(0,P.transformTextSpan)(h,l,x.optionalReplacementSpan,M.isCompletionEnabled),typeof N.data.completion=="object"&&N.data.completion.isAdditional?C.push(x):C.splice(0,0,x)}if(C.length)return{...C[0],entries:C.map(I=>I.entries).flat()}}else return s(O,p,f,E)},e.getCompletionEntryDetails=(_,p,f,E,O,g,h)=>{let l,C=_.replace(k,"/"),[I,N,x]=(0,A.getServiceScript)(t,C);if(I){let G=(0,P.toGeneratedOffset)(N,x,p,M.isCompletionEnabled);G!==void 0&&(l=b(C,G,f,E,O,g,h))}else return b(C,p,f,E,O,g,h);if(l?.codeActions)for(let G of l.codeActions)G.changes=G.changes.map(K=>(0,P.transformFileTextChanges)(t,K,M.isCompletionEnabled)).filter(A.notEmpty);return l},e.provideInlayHints=(_,p,f)=>{let E=_.replace(k,"/"),[O,g,h]=(0,A.getServiceScript)(t,E);if(O){let l,C;for(let x of h.mappings)(0,M.isInlayHintsEnabled)(x.data)&&x.sourceOffsets[0]>=p.start&&x.sourceOffsets[0]<=p.start+p.length&&(l??=x.generatedOffsets[0],C??=x.generatedOffsets[x.generatedOffsets.length-1],l=Math.min(l,x.generatedOffsets[0]),C=Math.max(C,x.generatedOffsets[x.generatedOffsets.length-1]));(l===void 0||C===void 0)&&(l=0,C=0),l+=g.snapshot.getLength(),C+=g.snapshot.getLength();let I=Ze(E,{start:l,length:C-l},f),N=[];for(let x of I){let G=(0,P.toSourceOffset)(g,h,x.position,M.isInlayHintsEnabled);G!==void 0&&N.push({...x,position:G})}return N}else return Ze(E,p,f)},e.getFileReferences=_=>{let p=_.replace(k,"/"),E=m(p).map(O=>(0,P.transformDocumentSpan)(t,O,M.isReferencesEnabled)).filter(A.notEmpty);return(0,te.dedupeDocumentSpans)(E)};function Z(_,p,f,E,O){let g=[],h=new Set,[l,C,I]=(0,A.getServiceScript)(t,_);if(l)for(let[x,G]of I.getGeneratedOffsets(p))f(G.data)&&N(_,x+C.snapshot.getLength());else N(_,p);return g;function N(x,G){if(h.has(x+":"+G))return;h.add(x+":"+G);let K=E(G);if(K){g.push(K);for(let le of O(K)){h.add(le[0]+":"+le[1]);let[et,tt]=(0,A.getServiceScript)(t,le[0]);if(!et)continue;let nt=t.linkedCodeMaps.get(et.code);if(nt)for(let Ut of nt.getLinkedOffsets(le[1]-tt.snapshot.getLength()))N(le[0],Ut+tt.snapshot.getLength())}}}}}Me.decorateLanguageService=er});var wt=q(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.createResolveModuleName=void 0;function tr(t,e,n,i){let r=new Map,c={readFile:e.readFile.bind(e),directoryExists:e.directoryExists?.bind(e),realpath:e.realpath?.bind(e),getCurrentDirectory:e.getCurrentDirectory?.bind(e),getDirectories:e.getDirectories?.bind(e),useCaseSensitiveFileNames:typeof e.useCaseSensitiveFileNames=="function"?e.useCaseSensitiveFileNames.bind(e):e.useCaseSensitiveFileNames,fileExists(s){for(let{typescript:a}of n)if(a){for(let{extension:o}of a.extraFileExtensions)if(s.endsWith(`.d.${o}.ts`)){let m=s.slice(0,-`.d.${o}.ts`.length)+`.${o}`;if(b(m)){let S=i(m);if(S?.generated){let d=S.generated.languagePlugin.typescript?.getServiceScript(S.generated.root);if(d){let v=m+".d.ts";return(d.extension===".js"||d.extension===".jsx")&&b(v)?r.set(s,{sourceFileName:v,extension:".ts"}):r.set(s,{sourceFileName:m,extension:d.extension}),!0}}}}}return e.fileExists(s)}};return(s,a,o,m,S,d)=>{let v=t.resolveModuleName(s,a,o,c,m,S,d);if(v.resolvedModule){let D=r.get(v.resolvedModule.resolvedFileName);D&&(v.resolvedModule.resolvedFileName=D.sourceFileName,v.resolvedModule.extension=D.extension)}return r.clear(),v};function b(s){return e.fileExists(s)?(t.sys.getFileSize?.(s)??e.readFile(s)?.length??0)<4*1024*1024:!1}}Fe.createResolveModuleName=tr});var Pt=q(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.searchExternalFiles=oe.decorateLanguageServiceHost=void 0;var nr=wt();function rr(t,e,n){let i=e.plugins.map(d=>d.typescript?.extraFileExtensions.map(v=>"."+v.extension)??[]).flat(),r=new Map,c=new Set,b=n.readDirectory?.bind(n),s=n.resolveModuleNameLiterals?.bind(n),a=n.resolveModuleNames?.bind(n),o=n.getScriptSnapshot.bind(n),m=n.getScriptKind?.bind(n);if(b&&(n.readDirectory=(d,v,D,u,y)=>{if(v)for(let L of v)v.includes(L)||(v=[...v,...L]);return b(d,v,D,u,y)}),i.length){let d=(0,nr.createResolveModuleName)(t,n,e.plugins,u=>e.scripts.get(u)),v=n.useCaseSensitiveFileNames?.()?u=>u:u=>u.toLowerCase(),D=t.createModuleResolutionCache(n.getCurrentDirectory(),v,n.getCompilationSettings());s&&(n.resolveModuleNameLiterals=(u,y,L,R,...T)=>u.every(j=>!i.some(F=>j.text.endsWith(F)))?s(u,y,L,R,...T):u.map(j=>d(j.text,y,R,D,L))),a&&(n.resolveModuleNames=(u,y,L,R,T,j)=>u.every(F=>!i.some(V=>F.endsWith(V)))?a(u,y,L,R,T,j):u.map(F=>d(F,y,T,D,R).resolvedModule))}n.getScriptSnapshot=d=>{let v=S(d);return v?v.snapshot:o(d)},m&&(n.getScriptKind=d=>{let v=S(d);return v?v.kind:m(d)});function S(d){if(c.has(d))return;let v;try{v=n.getScriptVersion(d)}catch{c.add(d)}if(v===void 0)return;let D=r.get(d);if(!D||D[0]!==v){D=[v];let u=e.scripts.get(d);if(u?.generated){let y=u.generated.languagePlugin.typescript?.getServiceScript(u.generated.root);if(y){let R=u.snapshot.getText(0,u.snapshot.getLength()).split(`
`).map(T=>" ".repeat(T.length)).join(`
`);R+=y.code.snapshot.getText(0,y.code.snapshot.getLength()),D[1]={extension:y.extension,kind:y.scriptKind,snapshot:t.ScriptSnapshot.fromString(R)}}u.generated.languagePlugin.typescript?.getExtraServiceScripts&&console.warn("getExtraServiceScripts() is not available in TS plugin.")}r.set(d,D)}return D[1]}}oe.decorateLanguageServiceHost=rr;function ir(t,e,n){if(e.projectKind!==t.server.ProjectKind.Configured)return[];let i=e.getProjectName(),r=t.readJsonConfigFile(i,e.readFile.bind(e)),c={useCaseSensitiveFileNames:e.useCaseSensitiveFileNames(),fileExists:e.fileExists.bind(e),readFile:e.readFile.bind(e),readDirectory:(...s)=>(s[1]=n,e.readDirectory(...s))};return t.parseJsonSourceFileConfigFileContent(r,c,e.getCurrentDirectory()).fileNames}oe.searchExternalFiles=ir});var Tt=q(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.fileLanguageIdProviderPlugin=void 0;De.fileLanguageIdProviderPlugin={getLanguageId(t){switch(t.split(".").pop()){case"js":return"javascript";case"cjs":return"javascript";case"mjs":return"javascript";case"ts":return"typescript";case"cts":return"typescript";case"mts":return"typescript";case"jsx":return"javascriptreact";case"tsx":return"typescriptreact";case"json":return"json"}}}});var kt=q(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.arrayItemsEqual=ae.createLanguageServicePlugin=void 0;var sr=Dt(),Lt=Pt(),At=pe(),or=Tt(),we=new WeakMap,Nt=new WeakMap,It=new WeakSet,Rt=new WeakSet;function ar(t){return e=>{let{typescript:n}=e;return{create(r){if(!It.has(r.languageService)&&!Rt.has(r.languageServiceHost)){It.add(r.languageService),Rt.add(r.languageServiceHost);let c=t(n,r),b=c.map(S=>S.typescript?.extraFileExtensions.map(d=>"."+d.extension)??[]).flat();Nt.set(r.project,b);let s=r.languageServiceHost.getScriptSnapshot.bind(r.languageServiceHost),a=r.languageServiceHost.getScriptVersion.bind(r.languageServiceHost),o=new At.FileMap(n.sys.useCaseSensitiveFileNames),m=(0,At.createLanguage)([...c,or.fileLanguageIdProviderPlugin],n.sys.useCaseSensitiveFileNames,S=>{let d=a(S);if(o.get(S)===d)return;o.set(S,d);let v=s(S);v?m.scripts.set(S,v):m.scripts.delete(S)});(0,sr.decorateLanguageService)(m,r.languageService),(0,Lt.decorateLanguageServiceHost)(n,m,r.languageServiceHost)}return r.languageService},getExternalFiles(r,c=0){if(c>=1||!we.has(r)){let b=we.get(r),s=(0,Lt.searchExternalFiles)(n,r,Nt.get(r));we.set(r,s),b&&!jt(b,s)&&r.refreshDiagnostics()}return we.get(r)}}}}ae.createLanguageServicePlugin=ar;function jt(t,e){if(t.length!==e.length)return!1;let n=new Set(t);for(let i of e)if(!n.has(i))return!1;return!0}ae.arrayItemsEqual=jt});var qt=q((Pe,Ht)=>{(function(t,e){typeof Pe=="object"&&typeof Ht<"u"?e(Pe):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sourcemapCodec={}))})(Pe,function(t){"use strict";let e=",".charCodeAt(0),n=";".charCodeAt(0),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(64),c=new Uint8Array(128);for(let u=0;u<i.length;u++){let y=i.charCodeAt(u);r[u]=y,c[y]=u}let b=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString()}}:{decode(u){let y="";for(let L=0;L<u.length;L++)y+=String.fromCharCode(u[L]);return y}};function s(u){let y=new Int32Array(5),L=[],R=0;do{let T=a(u,R),j=[],F=!0,V=0;y[0]=0;for(let H=R;H<T;H++){let U;H=o(u,H,y,0);let $=y[0];$<V&&(F=!1),V=$,m(u,H,T)?(H=o(u,H,y,1),H=o(u,H,y,2),H=o(u,H,y,3),m(u,H,T)?(H=o(u,H,y,4),U=[$,y[1],y[2],y[3],y[4]]):U=[$,y[1],y[2],y[3]]):U=[$],j.push(U)}F||S(j),L.push(j),R=T+1}while(R<=u.length);return L}function a(u,y){let L=u.indexOf(";",y);return L===-1?u.length:L}function o(u,y,L,R){let T=0,j=0,F=0;do{let H=u.charCodeAt(y++);F=c[H],T|=(F&31)<<j,j+=5}while(F&32);let V=T&1;return T>>>=1,V&&(T=-2147483648|-T),L[R]+=T,y}function m(u,y,L){return y>=L?!1:u.charCodeAt(y)!==e}function S(u){u.sort(d)}function d(u,y){return u[0]-y[0]}function v(u){let y=new Int32Array(5),L=1024*16,R=L-36,T=new Uint8Array(L),j=T.subarray(0,R),F=0,V="";for(let H=0;H<u.length;H++){let U=u[H];if(H>0&&(F===L&&(V+=b.decode(T),F=0),T[F++]=n),U.length!==0){y[0]=0;for(let $=0;$<U.length;$++){let Y=U[$];F>R&&(V+=b.decode(j),T.copyWithin(0,R,F),F-=R),$>0&&(T[F++]=e),F=D(T,F,y,Y,0),Y.length!==1&&(F=D(T,F,y,Y,1),F=D(T,F,y,Y,2),F=D(T,F,y,Y,3),Y.length!==4&&(F=D(T,F,y,Y,4)))}}}return V+b.decode(T.subarray(0,F))}function D(u,y,L,R,T){let j=R[T],F=j-L[T];L[T]=j,F=F<0?-F<<1|1:F<<1;do{let V=F&31;F>>>=5,F>0&&(V|=32),u[y++]=r[V]}while(F>0);return y}t.decode=s,t.encode=v,Object.defineProperty(t,"__esModule",{value:!0})})});var Gt=q((Le,Te)=>{var cr=Le&&Le.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,c;i<r;i++)(c||!(i in e))&&(c||(c=Array.prototype.slice.call(e,0,i)),c[i]=e[i]);return t.concat(c||Array.prototype.slice.call(e))};(function(t){if(typeof Te=="object"&&typeof Te.exports=="object"){var e=t(require,Le);e!==void 0&&(Te.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;var n=function(){function a(o,m,S,d){this._uri=o,this._languageId=m,this._version=S,this._content=d,this._lineOffsets=void 0}return Object.defineProperty(a.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),a.prototype.getText=function(o){if(o){var m=this.offsetAt(o.start),S=this.offsetAt(o.end);return this._content.substring(m,S)}return this._content},a.prototype.update=function(o,m){for(var S=0,d=o;S<d.length;S++){var v=d[S];if(a.isIncremental(v)){var D=b(v.range),u=this.offsetAt(D.start),y=this.offsetAt(D.end);this._content=this._content.substring(0,u)+v.text+this._content.substring(y,this._content.length);var L=Math.max(D.start.line,0),R=Math.max(D.end.line,0),T=this._lineOffsets,j=c(v.text,!1,u);if(R-L===j.length)for(var F=0,V=j.length;F<V;F++)T[F+L+1]=j[F];else j.length<1e4?T.splice.apply(T,cr([L+1,R-L],j,!1)):this._lineOffsets=T=T.slice(0,L+1).concat(j,T.slice(R+1));var H=v.text.length-(y-u);if(H!==0)for(var F=L+1+j.length,V=T.length;F<V;F++)T[F]=T[F]+H}else if(a.isFull(v))this._content=v.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=m},a.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=c(this._content,!0)),this._lineOffsets},a.prototype.positionAt=function(o){o=Math.max(Math.min(o,this._content.length),0);var m=this.getLineOffsets(),S=0,d=m.length;if(d===0)return{line:0,character:o};for(;S<d;){var v=Math.floor((S+d)/2);m[v]>o?d=v:S=v+1}var D=S-1;return{line:D,character:o-m[D]}},a.prototype.offsetAt=function(o){var m=this.getLineOffsets();if(o.line>=m.length)return this._content.length;if(o.line<0)return 0;var S=m[o.line],d=o.line+1<m.length?m[o.line+1]:this._content.length;return Math.max(Math.min(S+o.character,d),S)},Object.defineProperty(a.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),a.isIncremental=function(o){var m=o;return m!=null&&typeof m.text=="string"&&m.range!==void 0&&(m.rangeLength===void 0||typeof m.rangeLength=="number")},a.isFull=function(o){var m=o;return m!=null&&typeof m.text=="string"&&m.range===void 0&&m.rangeLength===void 0},a}(),i;(function(a){function o(d,v,D,u){return new n(d,v,D,u)}a.create=o;function m(d,v,D){if(d instanceof n)return d.update(v,D),d;throw new Error("TextDocument.update: document must be created by TextDocument.create")}a.update=m;function S(d,v){for(var D=d.getText(),u=r(v.map(s),function(V,H){var U=V.range.start.line-H.range.start.line;return U===0?V.range.start.character-H.range.start.character:U}),y=0,L=[],R=0,T=u;R<T.length;R++){var j=T[R],F=d.offsetAt(j.range.start);if(F<y)throw new Error("Overlapping edit");F>y&&L.push(D.substring(y,F)),j.newText.length&&L.push(j.newText),y=d.offsetAt(j.range.end)}return L.push(D.substr(y)),L.join("")}a.applyEdits=S})(i||(e.TextDocument=i={}));function r(a,o){if(a.length<=1)return a;var m=a.length/2|0,S=a.slice(0,m),d=a.slice(m);r(S,o),r(d,o);for(var v=0,D=0,u=0;v<S.length&&D<d.length;){var y=o(S[v],d[D]);y<=0?a[u++]=S[v++]:a[u++]=d[D++]}for(;v<S.length;)a[u++]=S[v++];for(;D<d.length;)a[u++]=d[D++];return a}function c(a,o,m){m===void 0&&(m=0);for(var S=o?[m]:[],d=0;d<a.length;d++){var v=a.charCodeAt(d);(v===13||v===10)&&(v===13&&d+1<a.length&&a.charCodeAt(d+1)===10&&d++,S.push(m+d+1))}return S}function b(a){var o=a.start,m=a.end;return o.line>m.line||o.line===m.line&&o.character>m.character?{start:m,end:o}:a}function s(a){var o=b(a.range);return o!==a.range?{newText:a.newText,range:o}:a}})});var zt=q(ce=>{"use strict";var fr=ce&&ce.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ce,"__esModule",{value:!0});ce.astro2tsx=void 0;var Wt=fr(require("node:path")),lr=require("@astrojs/compiler/sync"),ur=qt(),Vt=Gt();function dr(t,e){try{return(0,lr.convertToTSX)(t,{filename:e.filename})}catch(n){return console.error(`There was an error transforming ${e.filename} to TSX. An empty file will be returned instead. Please create an issue: https://github.com/withastro/language-tools/issues
Error: ${n}.`),{code:"",map:{file:e.filename??"",sources:[],sourcesContent:[],names:[],mappings:"",version:0},diagnostics:[{code:1e3,location:{file:e.filename,line:1,column:1,length:t.length},severity:1,text:"The Astro compiler encountered an unknown error while parsing this file. Please create an issue with your code and the error shown in the server's logs: https://github.com/withastro/language-tools/issues"}],metaRanges:{frontmatter:{start:0,end:0},body:{start:0,end:0}}}}}function pr(t,e){let n=dr(t,{filename:e});return{virtualFile:gr(t,n,e),diagnostics:n.diagnostics}}ce.astro2tsx=pr;function gr(t,e,n){e.code=hr(e.code,n);let i=(0,ur.decode)(e.map.mappings),r=Vt.TextDocument.create(n,"astro",0,t),c=Vt.TextDocument.create(n+".tsx","typescriptreact",0,e.code),b=[],s;for(let a=0;a<i.length;a++)for(let o of i[a]){let m=o[0],S=c.offsetAt({line:a,character:m});if(s){let d=S-s.genOffset,v=t.substring(s.sourceOffset,s.sourceOffset+d),D=e.code.substring(s.genOffset,s.genOffset+d);if(v!==D){d=0;for(let u=0;u<S-s.genOffset&&v[u]===D[u];u++)d=u+1}if(d>0){let u=b.length?b[b.length-1]:void 0;u&&u.generatedOffsets[0]+u.lengths[0]===s.genOffset&&u.sourceOffsets[0]+u.lengths[0]===s.sourceOffset?u.lengths[0]+=d:b.push({sourceOffsets:[s.sourceOffset],generatedOffsets:[s.genOffset],lengths:[d],data:{verification:!0,completion:!0,semantic:!0,navigation:!0,structure:!0,format:!1}})}s=void 0}if(o[2]!==void 0&&o[3]!==void 0){let d=r.offsetAt({line:o[2],character:o[3]});s={genOffset:S,sourceOffset:d}}}return{id:"tsx",languageId:"typescriptreact",snapshot:{getText:(a,o)=>e.code.substring(a,o),getLength:()=>e.code.length,getChangeRange:()=>{}},mappings:b,embeddedCodes:[]}}function hr(t,e){let n=Wt.default.basename(e,Wt.default.extname(e)),i=n.startsWith("[")&&n.endsWith("]");return t.replace(/\b(\S*)__AstroComponent_/gm,(r,c)=>c?i?`_${c}_`:c[0].toUpperCase()+c.slice(1):n==="404"?"FourOhFour":r)}});var Bt=q(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.AstroVirtualCode=fe.getLanguageModule=void 0;var mr=pe(),Sr=zt();function br(){return{getLanguageId(t){if(t.endsWith(".astro"))return"astro"},createVirtualCode(t,e,n){if(e==="astro"){let i=t;return new Ae(i,n)}},updateVirtualCode(t,e,n){return e.update(n),e},typescript:{extraFileExtensions:[{extension:"astro",isMixedContent:!0,scriptKind:7}],getServiceScript(t){for(let e of(0,mr.forEachEmbeddedCode)(t))if(e.id==="tsx")return{code:e,extension:".tsx",scriptKind:4}}}}}fe.getLanguageModule=br;var Ae=class{constructor(e,n){this.fileName=e,this.snapshot=n,this.id="root",this.languageId="astro",this.codegenStacks=[],this.onSnapshotUpdated()}update(e){this.snapshot=e,this.onSnapshotUpdated()}onSnapshotUpdated(){this.mappings=[{sourceOffsets:[0],generatedOffsets:[0],lengths:[this.snapshot.getLength()],data:{verification:!0,completion:!0,semantic:!0,navigation:!0,structure:!0,format:!1}}],this.embeddedCodes=[];let e=(0,Sr.astro2tsx)(this.snapshot.getText(0,this.snapshot.getLength()),this.fileName);this.embeddedCodes.push(e.virtualFile)}};fe.AstroVirtualCode=Ae});var vr=kt(),yr=Bt();module.exports=(0,vr.createLanguageServicePlugin)(()=>[(0,yr.getLanguageModule)()]);
